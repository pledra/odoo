<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
<t t-name="website.pagesMenu.submenu">
    <t t-set="path" t-value="page.item_type == 'page' ? page.path : page.link_url"/>
    <li t-att-data-menu-id="page.id">
        <div class="input-group">
            <span class="input-group-addon fa fa-bars"/>
            <a href="#" t-att-data-page-id="page.id" data-action="load_page_info">
                <span t-att-class="path == current_page_url ? 'bold black form-control' : 'form-control'">
                    <span class="js_menu_label">
                        <t t-esc="page.name"/>
                    </span>
                    <i class="pull-right fa fa-angle-right" style="margin-top: 3px"/>
                    <i t-if="page.item_type == 'link'" class="pull-right fa fa-link" style="margin-top: 3px"/>
                    <i t-if="path == homepage_path" class="pull-right fa fa-home" style="margin-top: 3px"/>
                </span>
            </a>
        </div>
        <t t-set="children" t-value="page.children"/>
        <ul t-if="children">
            <t t-foreach="children" t-as="page">
                <t t-call="website.pagesMenu.submenu"/>
            </t>
        </ul>
    </li>
</t>
<!--<div t-name="website.contentMenu.dialog.select">
    <select class="form-control mb16" t-if="widget.roots">
        <t t-foreach="widget.roots" t-as="root">
            <option t-att-value="root.id"><t t-esc="root.name"/></option>
        </t>
    </select>
</div>-->
<!--<div t-name="website.contentMenu.dialog.edit">
    <select class="form-control mb16" t-if="widget.roots">
        <t t-foreach="widget.roots" t-as="root">
            <option t-att-value="root.id"><t t-esc="root.name"/></option>
        </t>
    </select>
    <ul class="oe_menu_editor list-unstyled">
        <t t-foreach="widget.menu.children" t-as="page">
            <t t-call="website.pagesMenu.submenu"/>
        </t>
    </ul>
    <div class="mt32">
        <small class="pull-right text-muted">
            Drag a menu to the right to create a sub-menu
        </small>
        <a href="#" class="js_add_menu">
            <i class="fa fa-plus-circle"/> Add Menu Entry
        </a>
    </div>
</div>-->
<!--<t t-name="website.contentMenu.dialog.edit.link_menu_options">
    <div class="form-group">
        <label class="control-label col-sm-3">Link</label>
        <div class="col-sm-9">
            <input type="radio" name="link_menu_options" id="url" value="url" checked="checked"/> <label class="control-label mr16" for="url" >URL or Email</label>
            <input type="radio" name="link_menu_options" id="new_page" value="new_page"/> <label class="control-label" for="new_page">New Page</label>
        </div>
    </div>
</t>-->

<!-- Pages Management -->
<div t-name="website.pagesMenu.page_info" style="margin:10px;">
    <span class="fa fa-lg fa-times" data-action="close_page_info"></span>
    <br />
    <!--<ul class="nav nav-tabs">
        <li t-if="page.item_type == 'page'" t-att-class="page.item_type == 'page' ? 'active' : ''"><a data-toggle="tab" class="text-muted" href="#page_settings">Page Settings</a></li>
        <li t-if="false"><a data-toggle="tab" class="text-muted" href="#seo_promote">SEO (promote)</a></li>
        <li t-if="page.item_type == 'link'" t-att-class="page.item_type == 'link' ? 'active' : ''"><a data-toggle="tab" class="text-muted" href="#link_settings">Link Settings</a></li>
    </ul>-->
    <t t-if="page.item_type == 'page'">                          
        <form class="form-horizontal">
            <div class="form-group">
              <label class="control-label col-sm-4" for="page_name">Page Name</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" id="page_name" t-att-value="page.name" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4" for="page_path">Page Url</label>
                <div class="col-sm-8">
                    <div class="input-group">
                        <span class="input-group-addon"><t t-esc="server_url" /></span>
                        <input type="text" class="form-control input-sm" id="page_path" t-att-value="page.path" />
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4" for="is_menu">Show in top menu</label>
                <div class="col-sm-8">
                    <a>
                        <label class="o_switch js_publish_btn" for="is_menu" >
                            <input type="checkbox" t-att-checked="page.is_menu ? true : undefined" id="is_menu"/>
                            <span/>
                        </label>
                    </a>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4" for="is_homepage">Use as homepage</label>
                <div class="col-sm-8">
                    <a>
                        <label class="o_switch js_publish_btn" for="is_homepage" >
                            <input type="checkbox" t-att-checked="page.path == homepage_path ? true : undefined" id="is_homepage"/>
                            <span/>
                        </label>
                    </a>
                </div>
            </div>
            <!--<div class="form-group">
                <label class="control-label col-sm-4" for="page_redirect_to">Redirection Url</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" id="page_redirect_to" t-att-value="page.redirect_to" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4" for="page_redirect_type">Redirection Type</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" id="page_redirect_type" t-att-value="page.redirect_type" />
                </div>
            </div>-->
        </form>
    </t>
    <t t-if="page.item_type == 'link'">                          
        <form class="form-horizontal">
            <div class="form-group">
              <label class="control-label col-sm-4" for="menu_name">Menu Name</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" id="menu_name" t-att-value="page.name" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4" for="page_link_url">Link to</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control input-sm" id="page_link_url" t-att-value="page.link_url" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4" for="is_menu">Show in top menu</label>
                <div class="col-sm-8">
                    <a>
                        <label class="o_switch js_publish_btn" for="is_menu" >
                            <input type="checkbox" t-att-checked="page.is_menu ? true : undefined" id="is_menu"/>
                            <span/>
                        </label>
                    </a>
                </div>
            </div>
        </form>
    </t>
    <div>
        <hr />
        <a href="#" data-action="clone_page" class="text-muted" t-att-data-id="page.id"><i class="fa fa-clone"/> Clone <t t-esc="page.item_type == 'page' ? 'Page' : 'Link'" /></a>
        <a href="#" data-action="delete_page" class="text-muted" t-att-data-id="page.id"><i class="fa fa-trash"/> Delete <t t-esc="page.item_type == 'page' ? 'Page' : 'Link'" /></a>  
        <a t-att-href="page.item_type == 'page' ? page.path + '?spm=1' : page.link_url" class="text-muted" t-att-data-id="page.id"><i class="fa fa-arrow-right"/> Goto <t t-esc="page.item_type == 'page' ? 'Page' : 'Link'" /></a>  
        <small class="pull-right text-muted">
            <a href="#" t-att-data-id="page.id" t-att-data-item_type="page.item_type" data-action="save_page_info" class="colorTODO btn btn-xs btn-success">Save</a>
        </small>
    </div>
    <div t-if="page.item_type == 'page'">
        <br />
        <a t-att-data-path="page.path" data-action="go_to_seo" class="text-muted"><i class="fa fa-line-chart"/> Seo</a> 
        <a t-att-data-path="page.path" data-action="go_to_track" class="text-muted"><i class="fa fa-thumb-tack"/> Track</a> 
    </div>
</div>

<div t-name="website.pagesMenu" style="margin:10px;">
    <t t-esc="page_url" />
    <p class="open_pages_menu" data-toggle="collapse" data-target="#pages_management_menu_pages">
        <span class="caret"></span> Menu Pages (<t t-esc="tree_menu.length" />)
    </p>
    <ul class="oe_menu_editor list-unstyled collapse in" id="pages_management_menu_pages">
        <t t-foreach="tree_menu" t-as="page">
            <t t-call="website.pagesMenu.submenu"/>
        </t>
    </ul>
    <p class="open_pages_menu mt24" data-toggle="collapse" data-target="#pages_management_other_pages">
        <span class="caret"></span> Other Pages (<t t-esc="pages.length" />)
    </p>
    <ul class="oe_menu_editor list-unstyled collapse in" id="pages_management_other_pages">
        <li t-foreach="pages" t-as="page" t-att-data-menu-id="page.id">
            <t t-set="path" t-value="page.item_type == 'page' ? page.path : page.link_url"/>
            <div class="input-group">
                <span class="input-group-addon fa fa-bars"/>
                <a href="#" t-att-data-page-id="page.id"  data-action="load_page_info">
                    <span t-att-class="path == current_page_url ? 'bold black form-control' : 'form-control'">
                        <span class="js_menu_label">
                            <t t-esc="page.name"/>
                        </span>
                        <i class="pull-right fa fa-angle-right" style="margin-top: 3px"/>
                        <i t-if="page.item_type == 'link'" class="pull-right fa fa-link" style="margin-top: 3px"/>
                        <i t-if="path == homepage_path" class="pull-right fa fa-home" style="margin-top: 3px"/>
                    </span>
                </a>
            </div>
        </li>
    </ul>
    <hr />
    <div>
        <button data-action="save_management_page_menu" class="colorTODO pull-right btn btn-xs btn-success">Save</button>
        
        <div class="btn-group dropup">
            <button type="button" class="colorTODO btn btn-success btn-xs dropdown-toggle option_choice" data-toggle="dropdown" aria-expanded="false">
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <a href="#" class="colorTODO btn btn-success btn-xs" data-toggle="modal" data-target="#o_website_add_page_modal">
               Add a new Page
            </a>
            
            
            <ul class="dropdown-menu" role="menu">
                <li>
                    <a href="#" data-action="new_page">
                        <i class="fa fa-plus"/> Add a new Page
                    </a>
                </li>
                <li class="o_first_choice">
                    <a href="#" data-action="new_menu">
                        <i class="fa fa-plus"/> Add a new menu entry
                    </a>
                </li>
            </ul>
        </div>
        
        
        
    </div>
</div>
</templates>
