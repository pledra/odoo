<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
<t t-name="website.pagesMenu.submenu">
    <li t-att-data-object-id="object.id">
        <div class="input-group">
            <span class="input-group-addon fa fa-bars"/>
            <a href="#" t-att-data-object-id="object.id" data-action="load_page_info">
                <span t-att-class="(object.url == current_page_url) &amp;&amp; !object.is_link ? 'bold current_page black form-control' : 'form-control'">
                    <span class="js_menu_label">
                        <t t-esc="object.name" />
                    </span>                    
                    <i class="pull-right fa fa-angle-right" style="margin-top: 3px"/>
                    <i t-if="object.is_link" class="pull-right fa fa-link" style="margin-top: 3px"/>
                    <i t-if="object.website_published == 'true'" class="pull-right fa fa-eye-slash" style="margin-top: 3px"/>
                    <i t-if="object.url == homepage_path" class="pull-right fa fa-home" style="margin-top: 3px"/>
                </span>
            </a>
        </div>
        <t t-set="children" t-value="object.children"/>
        <ul t-if="children">
            <t t-foreach="children" t-as="object">
                <t t-call="website.pagesMenu.submenu"/>
            </t>
        </ul>
    </li>
</t>


<!-- Pages Management -->
<div t-name="website.pagesMenu.page_info">
    <span class="fa fa-lg fa-times" data-action="close_page_info"></span>
    <br />
    <ul class="nav nav-tabs">
        <li t-if="page.model == 'Page'" t-att-class="page.model == 'Page' ? 'active' : ''"><a data-toggle="tab" class="text-muted" href="#page_settings">Page Settings</a></li>
        <li t-if="page.model == 'Page'"><a class="text-muted" t-att-href="page.url +'?show_seo=1&amp;spm=1'">Optimize SEO</a></li>
        <li t-if="page.model == 'Page'"><a class="text-muted" href="#" t-att-data-path="page.url" data-action="go_to_track">Track this page</a></li>
        <li t-if="page.url != current_page_url" class="pull-right" >
            <a class="btn-link" t-att-href="page.url + '?spm=1'" t-att-data-object-id="page.id">
                Go to <t t-esc="page.model" /> <i class="fa fa-arrow-right"/>
            </a>  
        </li>
        <li t-if="page.model == 'Link'" t-att-class="page.model == 'Link' ? 'active' : ''"><a data-toggle="tab" class="text-muted" href="#link_settings">Link Settings</a></li>
    </ul>
    <div class="tab-content mt16">
        <div t-if="page.model == 'Page'" id="page_settings" class="tab-pane fade in active">
            <form class="form-horizontal">
                <div class="form-group">
                  <label class="control-label col-sm-3" for="object_name">Page Name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control input-sm" id="object_name" t-att-value="page.name" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="object_url">Page Url</label>
                    <div class="col-sm-9">
                        <div class="input-group">
                            <span class="input-group-addon" t-att-title="server_url"><small><t t-esc="server_url_trunc" /></small></span>
                            <input type="text" class="form-control input-sm" id="object_url" t-att-value="page.url" />
                
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="is_menu">Show in top menu</label>
                    <div class="col-sm-9">
                        <a>
                            <label class="o_switch js_publish_btn" for="is_menu" >
                                <input type="checkbox" t-att-checked="page.is_menu ? true : undefined" id="is_menu"/>
                                <span/>
                            </label>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="is_homepage">Use as homepage</label>
                    <div class="col-sm-9">
                        <a>
                            <label class="o_switch js_publish_btn" for="is_homepage" >
                                <input type="checkbox" t-att-checked="page.url == homepage_path ? true : undefined" id="is_homepage"/>
                                <span/>
                            </label>
                        </a>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="is_published">Publish</label>
                    <div class="col-sm-9">
                        <a>
                            <label class="o_switch js_publish_btn" for="is_published" >
                                <input type="checkbox" t-att-checked="page.website_published ? true : undefined" id="is_published"/>
                                <span/>
                            </label>
                        </a>
                    </div>
                </div>
                <!--<div class="form-group">
                  <label class="control-label col-sm-3" for="date_publish">Published Date</label>
                    <div class="col-sm-9">
                        <input type="date" class="form-control input-sm" id="date_publish" t-att-value="page.date_publish ? page.date_publish : ''" />
                    </div>
                </div>-->
                
                <t t-call="website.pagesMenu.page_opt"/>
            </form>
        </div>
        <div t-if="page.model == 'Link'" id="link_settings" class="tab-pane fade in active">                    
            <form class="form-horizontal">
                <div class="form-group">
                  <label class="control-label col-sm-3" for="object_name">Menu Name</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control input-sm" id="object_name" t-att-value="page.name" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="object_url">Link to</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control input-sm" id="object_url" t-att-value="page.url" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="is_menu">Show in top menu</label>
                    <div class="col-sm-9">
                        <a>
                            <label class="o_switch js_publish_btn" for="is_menu" >
                                <input type="checkbox" t-att-checked="page.is_menu ? true : undefined" id="is_menu"/>
                                <span/>
                            </label>
                        </a>
                    </div>
                </div>
                <t t-call="website.pagesMenu.page_opt"/>
            </form>
        </div>
    </div>
    <hr class="mb4" />
    <a href="#" t-att-data-object-id="page.id" data-action="save_page_info" class="pull-right btn btn-primary">Save</a>
</div>


<li t-name="website.pagesMenu" style="margin:10px;">
    <p class="open_pages_menu" data-toggle="collapse" data-target="#pages_management_menu_pages">
        <span class="caret"></span> Menu Pages (<t t-esc="tree_menu.length" />)
    </p>
    <ul class="oe_menu_editor list-unstyled collapse in" id="pages_management_menu_pages">
        <t t-foreach="tree_menu" t-as="object">
            <t t-call="website.pagesMenu.submenu"/>
        </t>
    </ul>
    <p class="open_pages_menu mt24" data-toggle="collapse" data-target="#pages_management_other_pages">
        <span class="caret"></span> Other Pages (<t t-esc="pages.length" />)
    </p>
    <ul class="oe_menu_editor list-unstyled collapse in" id="pages_management_other_pages">
        <t t-foreach="pages" t-as="object">
            <t t-call="website.pagesMenu.submenu"/>
        </t>
    </ul>
    <hr />
    <div class="js_pagesMenu_btns">
        <button data-action="save_management_page_menu" class="pull-right btn btn-xs btn-primary">Save</button>
        
        <div class="btn-group dropup">
            <button type="button" class="btn btn-primary btn-xs dropdown-toggle option_choice" data-toggle="dropdown" aria-expanded="false">
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <button data-action="new_item" class="pull-right btn btn-xs btn-primary">Add a new Page</button>
            
            <ul class="dropdown-menu" role="menu">
                <li>
                    <a href="#" data-action="new_page">
                        <i class="fa fa-plus"/> Add a new Page
                    </a>
                </li>
                <li class="o_first_choice">
                    <a href="#" data-action="new_menu">
                        <i class="fa fa-plus"/> Add a new menu entry
                    </a>
                </li>
            </ul>
        </div>
        
        
        
    </div>
</li>

<div t-name="website.pagesMenu.page_opt">
  <div class="form-group mt16">
      <label class="control-label col-sm-3">Actions</label>
      <div class="col-sm-9">
          <div class="btn-group">
            <a href="#" data-action="clone_page" class="btn btn-default btn-sm" t-att-data-object-id="page.id">
                <i class="fa fa-clone"/> Clone <t t-esc="page.model" />
            </a>
            <a href="#" data-action="delete_object" class="btn btn-default btn-sm" t-att-data-object-id="page.id">
                <i class="fa fa-trash"/> Delete <t t-esc="page.model" />
            </a>  

          </div>
      </div>
  </div>
</div>
  
</templates>
